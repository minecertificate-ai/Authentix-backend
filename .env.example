# AUTHENTIX BACKEND - Environment Variables Template
# Copy this file to .env.local and fill in your actual values
# DO NOT commit .env.local to git (it's in .gitignore)

# ============================================
# SUPABASE CONFIGURATION
# ============================================
# Get these from your Supabase project settings
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here
SUPABASE_ANON_KEY=your-anon-key-here

# ============================================
# FRONTEND CONFIGURATION
# ============================================
# URL of your frontend application (for CORS and redirects)
FRONTEND_URL=http://localhost:3001
APP_URL=http://localhost:3001

# ============================================
# RAZORPAY CONFIGURATION (TEST)
# ============================================
# Get these from Razorpay Dashboard > Settings > API Keys (Test Mode)
RAZORPAY_KEY_ID_TEST=your-test-key-id
RAZORPAY_KEY_SECRET_TEST=your-test-key-secret
RAZORPAY_WEBHOOK_SECRET_TEST=your-test-webhook-secret

# ============================================
# RAZORPAY CONFIGURATION (PRODUCTION)
# ============================================
# Get these from Razorpay Dashboard > Settings > API Keys (Live Mode)
# Only set these when deploying to production
RAZORPAY_KEY_ID_PROD=your-prod-key-id
RAZORPAY_KEY_SECRET_PROD=your-prod-key-secret
RAZORPAY_WEBHOOK_SECRET_PROD=your-prod-webhook-secret

# ============================================
# SERVER CONFIGURATION
# ============================================
# Port for local development (Vercel will set this automatically)
PORT=3000
HOST=0.0.0.0

# Logging level: trace, debug, info, warn, error, fatal
LOG_LEVEL=info

# Node environment (development, production)
# Vercel sets this automatically
NODE_ENV=development

# ============================================
# SECURITY CONFIGURATION
# ============================================

# CORS strict mode (true = reject requests without valid origin)
CORS_STRICT_MODE=true

# CSRF enforcement (cookie = only for cookie auth, all = all requests, off = disabled)
CSRF_ENFORCEMENT=cookie

# Cookie secret for signing cookies (generate with: openssl rand -base64 32)
COOKIE_SECRET=your-random-secret-key-here

# Rate limiting (true = enabled, false = disabled)
RATE_LIMIT_ENABLED=true

# Helmet security headers (true = enabled, false = disabled)
HELMET_ENABLED=true

# ============================================
# PERFORMANCE OPTIMIZATION
# ============================================

# JWT verification caching (97% latency reduction when enabled)
JWT_CACHE_ENABLED=true
JWT_CACHE_TTL=3600

# Dashboard stats caching (reduces DB queries)
DASHBOARD_CACHE_TTL=60

# Signed URL caching (prevents redundant Supabase API calls)
SIGNED_URL_CACHE_ENABLED=true

# ============================================
# LOGGING CONFIGURATION
# ============================================

# Threshold for logging slow requests (milliseconds)
SLOW_REQUEST_THRESHOLD=500

# Enable redaction of sensitive data in logs
LOG_REDACTION_ENABLED=true

# ============================================
# FEATURE FLAGS
# ============================================

# Automatically include preview URLs in template list responses
TEMPLATES_DEFAULT_INCLUDE_PREVIEW=false

# Idempotency protection for mutations (prevents duplicate operations)
IDEMPOTENCY_ENABLED=true
IDEMPOTENCY_TTL=86400

# ============================================
# PAGINATION LIMITS (Prevent Abuse)
# ============================================

# Maximum records per page (prevents loading millions of records)
MAX_PAGE_LIMIT=100
